<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Skins Game</title>
<style>
body, html {
    margin:0; padding:0;
    width:100%; height:100%;
    overflow:hidden;
    background:#000;
    font-family:'Arial Black', sans-serif;
    touch-action:none;
}
canvas { display:block; }

#ui {
    position:absolute;
    top:20px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    flex-direction:column;
    align-items:center;
    z-index:10;
    color:#fff;
    max-width: 90%;
}
#status {
    font-size:36px;
    margin-bottom:20px;
    text-align:center;
    color:#0ff;
    text-shadow:2px 2px 10px #0ff;
}
button {
    font-size:28px;
    padding:12px 30px;
    margin:5px;
    border:none;
    border-radius:15px;
    cursor:pointer;
    background: linear-gradient(#0ff,#0aa);
    color:#000;
    text-shadow:1px 1px 2px #0ff;
    transition:0.2s;
}
button:hover { background: linear-gradient(#0aa,#0ff); }

@media (max-width:600px){
    #status { font-size:24px; }
    button { font-size:18px; padding:8px 20px; }
}
@media (min-width:601px) and (max-width:1200px){
    #status { font-size:32px; }
    button { font-size:24px; padding:10px 25px; }
}
@media (min-width:1201px){
    #status { font-size:40px; }
    button { font-size:28px; padding:12px 30px; }
}
</style>
</head>
<body>
<div id="ui">
    <div id="status">Select Begin Star</div>
    <div>
        <button id="resetBtn">Restart Game</button>
    </div>
</div>
    <!-- Cheat Sheet Toggle Button -->
<button id="toggleCheatBtn" style="
    position:absolute;
    bottom:20px;
    left:20px;
    background:linear-gradient(#0ff,#00a);
    color:#000;
    font-size:18px;
    padding:10px 20px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    z-index:10;
    text-shadow:1px 1px 2px #0ff;
    transition:0.3s;
">Show Cheat Sheet</button>

<!-- Cheat Sheet Overlay -->
<div id="cheatsheet" style="
    position:absolute;
    bottom:60px;
    left:20px;
    background:rgba(0,0,0,0.7);
    padding:20px;
    border-radius:15px;
    font-family:'Arial Black', sans-serif;
    color:#fff;
    text-align:left;
    z-index:10;
    max-width:220px;
    display:none;
    box-shadow:0 0 20px #0ff;
    animation:fadeIn 0.3s ease-in-out;
">
    <h3 style="color:#0ff; text-align:center; text-shadow: 0 0 5px #0ff;">‚≠ê Cheat Sheet ‚≠ê</h3>
    <p><span style="color:#f0f;">‚òÖ</span> Begin Star</p>
    <p><span style="color:#ff5500;">‚òÖ</span> End Star</p>
    <p><span style="color:#ff0;">‚òÖ</span> Human Star</p>
    <p><span style="color:#0ff;">‚òÖ</span> AI Star</p>
    <p><span style="color:#0f0;">‚òÖ</span> Visited Star</p>
    <hr style="border:1px solid #0ff;">
    <p><strong>Controls:</strong></p>
    <p>Drag / Touch ‚Üí Rotate Vortex</p>
    <p>Mouse Wheel / Pinch ‚Üí Zoom In/Out</p>
    <p>Click / Tap ‚Üí Select Star</p>
    <p>Restart Game ‚Üí Press Button</p>
</div>

<style>
@keyframes fadeIn {
    from {opacity:0;}
    to {opacity:1;}
}
</style>

<script>
// Toggle cheat sheet visibility
const cheatBtn = document.getElementById('toggleCheatBtn');
const cheatDiv = document.getElementById('cheatsheet');
let cheatVisible = false;

cheatBtn.addEventListener('click', () => {
    cheatVisible = !cheatVisible;
    cheatDiv.style.display = cheatVisible ? 'block' : 'none';
    cheatBtn.innerText = cheatVisible ? 'Hide Cheat Sheet' : 'Show Cheat Sheet';
});
</script>

<canvas id="canvas"></canvas>
<script>
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;

// ----------------------
// Star Vortex Setup
// ----------------------
let starList=[];
let rotX=0, rotY=0;
let scaleFactor=500; // zoom

const totalStars=10;
const radius=0.5, heightStep=0.3;

// Puzzle state
let beginStar=null;
let endStar=null;
let currentStar=null;
let visited=[];
let moveCount=0;

// Arcade colors
const colors={
    human:"#ff0", // yellow
    ai:"#0ff",    // cyan
    begin:"#f0f", // magenta
    end:"#ff5500", // orange
    visited:"#0f0" // neon green
};

// Create star vortex
for(let i=0;i<totalStars;i++){
    let angle=i*(Math.PI/4);
    let z=i*heightStep;
    starList.push({
        id:i,
        x: radius*Math.cos(angle),
        y: radius*Math.sin(angle),
        z: z,
        edges:[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]],
        vertices:[
            [0,0,0.1],
            [0.05,0,-0.05],
            [-0.05,0.05,-0.05],
            [-0.05,-0.05,-0.05]
        ],
        neighbors:[],
        type:i%2===0?"human":"ai"
    });
}

// Connect stars sequentially
for(let i=0;i<totalStars-1;i++){
    starList[i].neighbors.push(starList[i+1].id);
    starList[i+1].neighbors.push(starList[i].id);
}

// ----------------------
// 3D Projection & Rotation
// ----------------------
function rotateXVec([x,y,z],angle){ const c=Math.cos(angle),s=Math.sin(angle); return [x, y*c - z*s, y*s + z*c]; }
function rotateYVec([x,y,z],angle){ const c=Math.cos(angle),s=Math.sin(angle); return [x*c + z*s, y, -x*s + z*c]; }
function project([x,y,z]){ return [canvas.width/2 + x*scaleFactor, canvas.height/2 - y*scaleFactor]; }

// Draw star
function drawStar(s){
    const transformed=s.vertices.map(v=>{
        let vx=v[0]+s.x, vy=v[1]+s.y, vz=v[2]+s.z;
        return rotateYVec(rotateXVec([vx,vy,vz], rotX), rotY);
    });
    let color = colors[s.type];
    if(s===beginStar) color=colors.begin;
    else if(s===endStar) color=colors.end;
    else if(visited.includes(s.id)) color=colors.visited;

    for(const [i,j] of s.edges){
        const [x1,y1]=project(transformed[i]);
        const [x2,y2]=project(transformed[j]);
        ctx.strokeStyle=color;
        ctx.lineWidth=2;
        ctx.beginPath();
        ctx.moveTo(x1,y1);
        ctx.lineTo(x2,y2);
        ctx.stroke();
    }
    const [cx,cy]=project([s.x,s.y,s.z]);
    ctx.fillStyle=color;
    ctx.font="24px Arial Black";
    ctx.fillText("‚òÖ", cx-12, cy+8);
}

// Pick star
function pickStar(x,y){
    for(const s of starList){
        const [sx,sy]=project(rotateYVec(rotateXVec([s.x,s.y,s.z], rotX), rotY));
        const dx=x-sx, dy=y-sy;
        if(Math.sqrt(dx*dx+dy*dy)<30) return s;
    }
    return null;
}

// Animation loop
function draw(){
    ctx.fillStyle="#000";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    starList.forEach(s=>drawStar(s));
    requestAnimationFrame(draw);
}
draw();

// ----------------------
// Rotation controls
// ----------------------
let isDragging=false, lastX=0, lastY=0;
canvas.addEventListener('mousedown', e=>{ isDragging=true; lastX=e.clientX; lastY=e.clientY; });
canvas.addEventListener('mousemove', e=>{ if(isDragging){ let dx=e.clientX-lastX, dy=e.clientY-lastY; rotY+=dx*0.01; rotX+=dy*0.01; lastX=e.clientX; lastY=e.clientY; }});
canvas.addEventListener('mouseup', e=>isDragging=false);
canvas.addEventListener('mouseleave', e=>isDragging=false);
canvas.addEventListener('touchstart', e=>{ isDragging=true; lastX=e.touches[0].clientX; lastY=e.touches[0].clientY; });
canvas.addEventListener('touchmove', e=>{ e.preventDefault(); if(isDragging){ let dx=e.touches[0].clientX-lastX, dy=e.touches[0].clientY-lastY; rotY+=dx*0.01; rotX+=dy*0.01; lastX=e.touches[0].clientX; lastY=e.touches[0].clientY; } });
canvas.addEventListener('touchend', e=>isDragging=false);

// ----------------------
// Puzzle Click
// ----------------------
canvas.addEventListener('click', e=>{
    const s=pickStar(e.clientX,e.clientY);
    if(!s) return;
    if(!beginStar){
        beginStar=s;
        currentStar=s;
        endStar=starList[starList.length-1];
        visited.push(s.id);
        moveCount=0;
        document.getElementById('status').innerText="Navigate to Magenta End!";
    } else if(currentStar.neighbors.includes(s.id) && !visited.includes(s.id)){
        currentStar=s;
        visited.push(s.id);
        moveCount++;
        if(currentStar===endStar){
            document.getElementById('status').innerText=`üéâ Puzzle Complete in ${moveCount} moves!`;
        }
    }
});

// ----------------------
// Reset
// ----------------------
document.getElementById('resetBtn').addEventListener('click', ()=>{
    beginStar=null;
    endStar=null;
    currentStar=null;
    visited=[];
    moveCount=0;
    document.getElementById('status').innerText="Select Begin Star";
});

// ----------------------
// Zoom controls
// ----------------------
canvas.addEventListener('wheel', e=>{
    e.preventDefault();
    scaleFactor *= e.deltaY < 0 ? 1.1 : 0.9;
    if(scaleFactor<100) scaleFactor=100;
    if(scaleFactor>2000) scaleFactor=2000;
});

let lastDistance=null;
canvas.addEventListener('touchmove', e=>{
    if(e.touches.length===2){
        e.preventDefault();
        const dx=e.touches[0].clientX - e.touches[1].clientX;
        const dy=e.touches[0].clientY - e.touches[1].clientY;
        const distance=Math.sqrt(dx*dx + dy*dy);
        if(lastDistance!=null){
            const zoom = distance / lastDistance;
            scaleFactor *= zoom;
            if(scaleFactor<100) scaleFactor=100;
            if(scaleFactor>2000) scaleFactor=2000;
        }
        lastDistance = distance;
    }
});
canvas.addEventListener('touchend', e=>{ if(e.touches.length<2) lastDistance=null; });

window.addEventListener('resize', ()=>{canvas.width=window.innerWidth; canvas.height=window.innerHeight;});
</script>
</body>
</html>
