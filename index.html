<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Polyhydra Vortex</title>
<style>
body, html { margin:0; padding:0; width:100%; height:100%; overflow:hidden; background:#111; font-family:sans-serif; }
#ui { position:absolute; top:10px; left:10px; color:#fff; z-index:10; }
button { margin:5px; padding:10px; border-radius:8px; border:none; cursor:pointer; background:#333; color:#fff; }
button:hover{ background:#555; }
#euler{ font-weight:bold; margin-top:5px;}
canvas{display:block;}
</style>
</head>
<body>
<div id="ui">
  <button onclick="spinFaster()">Spin Faster</button>
  <div id="euler">Euler χ: 2</div>
</div>
<canvas id="canvas"></canvas>
<script>
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;

let tetraList=[];
let rotY=0;
let spinSpeed=0.01;

// Create vortex: 10 tetra with 10 branches along a helix
const totalTetra=10;
const radius=0.5;
const heightStep=0.3;
for(let i=0;i<totalTetra;i++){
    let angle=i*(Math.PI/4); // 45 deg increment
    let z=i*heightStep;
    const tetra={
        id:i+1,
        source: i%2===0?"Human":"AI",
        x: radius*Math.cos(angle),
        y: radius*Math.sin(angle),
        z: z,
        edges:[[0,1],[0,2],[0,3],[1,2],[1,3],[2,3]],
        vertices:[
            [0,0,0.1],
            [0.05,0,-0.05],
            [-0.05,0.05,-0.05],
            [-0.05,-0.05,-0.05]
        ]
    };
    tetraList.push(tetra);
}

// Compute Euler: V=4*10, E=6*10, F=4*10 => χ=2
let euler=2;
document.getElementById('euler').innerText="Euler χ: "+euler;

// 3D projection
function rotateYVec([x,y,z], angle){ const c=Math.cos(angle),s=Math.sin(angle); return [x*c+z*s,y,-x*s+z*c]; }
function project([x,y,z]){ const scale=500; return [canvas.width/2 + x*scale, canvas.height/2 - y*scale]; }

// Draw tetra
function drawTetra(t){
    const transformed=t.vertices.map(v=>{
        const vx=v[0]+t.x, vy=v[1]+t.y, vz=v[2]+t.z;
        return rotateYVec([vx,vy,vz], rotY);
    });
    for(const [i,j] of t.edges){
        const [x1,y1]=project(transformed[i]);
        const [x2,y2]=project(transformed[j]);
        ctx.strokeStyle=t.source==="Human"?"#0f0":"#0af";
        ctx.lineWidth=2;
        ctx.beginPath();
        ctx.moveTo(x1,y1);
        ctx.lineTo(x2,y2);
        ctx.stroke();
    }
}

// Animation loop
function draw(){
    ctx.fillStyle="#111";
    ctx.fillRect(0,0,canvas.width,canvas.height);
    tetraList.forEach(t=>drawTetra(t));
    rotY+=spinSpeed;
    requestAnimationFrame(draw);
}
draw();

// Spin faster button
function spinFaster(){ spinSpeed+=0.01; }

// Responsive canvas
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});
</script>
</body>
</html>

